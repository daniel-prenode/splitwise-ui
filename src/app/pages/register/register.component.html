<div class="auth-container">
  <div class="auth-card">
    <mat-card>
      <mat-card-header class="text-center mb-4">
        <mat-card-title class="h3 fw-bold text-primary">
          {{ 'register.title' | translate }}
        </mat-card-title>
        <mat-card-subtitle>
          {{ 'register.subtitle' | translate }}
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <form
          [formGroup]="registerForm"
          (ngSubmit)="onSubmit()"
          class="d-flex flex-column gap-3"
        >
          <div class="row">
            <div class="col-md-6">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>{{
                  'register.firstname.label' | translate
                }}</mat-label>
                <input
                  matInput
                  type="text"
                  formControlName="firstName"
                  [placeholder]="'register.firstname.placeholder' | translate"
                />
                <mat-icon matSuffix>person</mat-icon>
                <mat-error
                  *ngIf="
                    registerForm.get('firstName')?.invalid &&
                    registerForm.get('firstName')?.touched
                  "
                >
                  {{ getFirstNameErrorMessage() }}
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-md-6">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>{{
                  'register.lastname.label' | translate
                }}</mat-label>
                <input
                  matInput
                  type="text"
                  formControlName="lastName"
                  [placeholder]="'register.lastname.placeholder' | translate"
                />
                <mat-icon matSuffix>person</mat-icon>
                <mat-error
                  *ngIf="
                    registerForm.get('lastName')?.invalid &&
                    registerForm.get('lastName')?.touched
                  "
                >
                  {{ getLastNameErrorMessage() }}
                </mat-error>
              </mat-form-field>
            </div>
          </div>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'register.email.label' | translate }}</mat-label>
            <input
              matInput
              type="email"
              formControlName="email"
              [placeholder]="'register.email.placeholder' | translate"
            />
            <mat-icon matSuffix>email</mat-icon>
            <mat-error
              *ngIf="
                registerForm.get('email')?.invalid &&
                registerForm.get('email')?.touched
              "
            >
              {{ getEmailErrorMessage() }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'register.password.label' | translate }}</mat-label>
            <input
              matInput
              [type]="hidePassword$() ? 'password' : 'text'"
              formControlName="password"
              [placeholder]="'register.password.placeholder' | translate"
            />
            <button
              mat-icon-button
              matSuffix
              (click)="togglePasswordVisibility()"
              type="button"
            >
              <mat-icon>{{
                hidePassword$() ? 'visibility_off' : 'visibility'
              }}</mat-icon>
            </button>
            <mat-error
              *ngIf="
                registerForm.get('password')?.invalid &&
                registerForm.get('password')?.touched
              "
            >
              {{ getPasswordErrorMessage() }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{
              'register.confirm.password.label' | translate
            }}</mat-label>
            <input
              matInput
              [type]="hideConfirmPassword$() ? 'password' : 'text'"
              formControlName="confirmPassword"
              [placeholder]="
                'register.confirm.password.placeholder' | translate
              "
            />
            <button
              mat-icon-button
              matSuffix
              (click)="toggleConfirmPasswordVisibility()"
              type="button"
            >
              <mat-icon>{{
                hideConfirmPassword$() ? 'visibility_off' : 'visibility'
              }}</mat-icon>
            </button>
            <mat-error
              *ngIf="
                registerForm.get('confirmPassword')?.invalid &&
                registerForm.get('confirmPassword')?.touched
              "
            >
              {{ getConfirmPasswordErrorMessage() }}
            </mat-error>
          </mat-form-field>

          <button
            mat-raised-button
            color="primary"
            type="submit"
            [disabled]="registerForm.invalid || isLoading$()"
            class="full-width py-3 mt-3"
          >
            <mat-spinner
              *ngIf="isLoading$()"
              diameter="20"
              class="me-2"
            ></mat-spinner>
            {{ buttonText$() }}
          </button>
        </form>
      </mat-card-content>

      <mat-card-actions class="d-flex flex-column gap-2 p-3">
        <div class="text-center">
          <span class="text-muted">{{
            'register.have.account' | translate
          }}</span>
          <a routerLink="/login" class="text-decoration-none fw-bold">{{
            'register.signin.link' | translate
          }}</a>
        </div>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
